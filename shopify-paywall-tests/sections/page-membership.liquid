{% comment %}
  Membership Page Section
  
  This section displays content only to customers with an active membership.
  Membership is determined by customer tags (set by subscription apps).
{% endcomment %}

{% assign membership_tag = section.settings.membership_tag | default: 'member-active' %}
{% render 'access-control', access_type: 'membership', membership_tag: membership_tag %}

<div class="page-width">
  {% if has_access %}
    <div class="page-membership__content">
      <h1>{{ page.title }}</h1>
      <div class="rte">
        {{ page.content }}
      </div>
    </div>
  {% else %}
    <div class="page-membership__restricted">
      {% if customer %}
        <h1>Membership Required</h1>
        <p>{{ access_message }}</p>
        <a href="{{ redirect_url }}" class="button">Start Membership</a>
      {% else %}
        <h1>Login Required</h1>
        <p>{{ access_message }}</p>
        <a href="{{ redirect_url }}" class="button">Log In</a>
      {% endif %}
    </div>
  {% endif %}
</div>

{% stylesheet %}
  .page-membership__content {
    padding: 2rem 0;
  }
  
  .page-membership__restricted {
    padding: 4rem 0;
    text-align: center;
  }
  
  .page-membership__restricted h1 {
    margin-bottom: 1rem;
  }
  
  .page-membership__restricted p {
    margin-bottom: 2rem;
    font-size: 1.1rem;
  }
  
  .button {
    display: inline-block;
    padding: 0.75rem 2rem;
    background-color: #000;
    color: #fff;
    text-decoration: none;
    border-radius: 4px;
    transition: background-color 0.2s;
  }
  
  .button:hover {
    background-color: #333;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Membership Protected Page",
  "settings": [
    {
      "type": "text",
      "id": "membership_tag",
      "label": "Membership Tag",
      "info": "The customer tag that indicates active membership (e.g., 'member-active')",
      "default": "member-active"
    }
  ]
}
{% endschema %}

